<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.scut.dao.studentDao.IStudentDao">
	<select id="verificateTelnumber" resultType="String" parameterType="String">
		SELECT phone FROM student WHERE phone = #{telnumber}
	</select>
	
	<insert id="inputStudent" timeout="10">
		insert into student (student_id, phone, password, create_time, pic_path, nickname, birthday, sex, school, token)
		values (#{id},#{phone},#{password},#{createTime},#{pic_path},#{nickname},#{birthday,javaType=Date,jdbcType=DATE},#{sex},#{school},#{token})
	</insert>
	
	<select id="getIdAndPwdAndToken" parameterType="String" resultType="HashMap">
		SELECT student_id, password , token FROM student WHERE phone = #{telnumber}
	
	</select>
	
	<select id="getStudentIdAndName" parameterType="String" resultType="HashMap">
		SELECT student_id, nickname FROM student WHERE phone = #{telnumber}
	</select>
	
	<select id="getName" parameterType = "String" resultType = "String">
		SELECT nickname FROM student WHERE student_id = #{id}
	</select>
	
	<select id="getClassIdFromJoinClass" parameterType = "String" resultType = "String">
		SELECT class_id FROM join_class WHERE student_id = #{id}
	</select>
	
	<update id="updateToken">
		update student set
			token = #{token}
		where student_id = #{id}
	</update>
	
	<select id="getStudentId" parameterType = "String" resultType = "String">
		SELECT student_id FROM student WHERE phone = #{telnumber}
	</select>
	
	<select id="getHomeworkList" parameterType = "String" resultType = "List<Map<String, String>>">
		select * from homework_student where student_id = #{studentId}
	</select>
</mapper>